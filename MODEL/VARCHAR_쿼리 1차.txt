create database varchar default character set UTF8;

DROP TABLES MEMBER;
DROP TABLES PRODUCT;
DROP TABLES PRODUCT_IMAGE;
DROP TABLES ORDER;
DROP TABLES ORDER_DETAIL;
DROP TABLES PAYMENT;
DROP TABLES REVIEW;
DROP TABLES LIKE;

--회원 테이블
CREATE TABLE MEMBER(
MEMBER_ID VARCHAR(30) PRIMARY KEY,
MEMBER_PW VARCHAR(30) NOT NULL,
MEMBER_NAME VARCHAR(30) NOT NULL,
MEMBER_ADDRESS VARCHAR(100),
MEMBER_PHONE INT,
MEMBER_PHONE VARCHAR(30)
);

--상품 테이블
CREATE TABLE PRODUCT(
PRODUCT_NUM INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
PRODUCT_NAME VARCHAR(15) NOT NULL,
PRODUCT_PRICE INT UNSIGNED NOT NULL,
PRODUCT_CNT INT UNSIGNED NOT NULL DEFAULT 0,
PRODUCT_CATEGORY VARCHAR(10) CHECK ( PRODUCT_CATEGORY IN ('녹차', '홍차', '우롱차','보이차', '허브차')) NOT NULL --체크
);


--상품 이미지 테이블
CREATE TABLE IMAGE(
IMAGE_NUM INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
NUM INT UNSIGNED NOT NULL,
IMAGE_URL VARCHAR(100) NOT NULL,
IMAGE_DIVISION INT UNSIGNED
);



--주문
CREATE TABLE BUY(
BUY_NUM INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
MEMBER_ID VARCHAR(30) NOT NULL
);


--주문상세
CREATE TABLE BUY_DETAIL(
BUY_SERIAL INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
BUY_NUM INT UNSIGNED NOT NULL,
PRODUCT_NUM INT UNSIGNED NOT NULL,
BUY_CNT INT UNSIGNED NOT NULL
);


--결제
CREATE TABLE PAYMENT(
PAYMENT_NUM INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
PAYMENT_NAME VARCHAR(15) NOT NULL,
PAYMENT_NAME VARCHAR(30) NOT NULL
);

--리뷰
CREATE TABLE REVIEW(
REVIEW_NUM INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
MEMBER_ID VARCHAR(30) NOT NULL,
REVIEW_TITLE VARCHAR(15) NOT NULL,
REVIEW_CONTENT VARCHAR(300) NOT NULL
);

-- 찜
CREATE TABLE REVIEW(
LIKE_NUM INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
MEMBER_ID VARCHAR(30) NOT NULL,
PRODUCT_NUM INT UNSIGNED NOT NULL

FOREIGN KEY (MEMBER_ID) REFERENCES MEMBER(MEMBER_ID) ON CASCADE,
FOREIGN KEY (PRODUCT_NUM) REFERENCES PRODUCT(PRODUCT_NUM) ON CASCADE
);


















